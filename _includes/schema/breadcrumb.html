{% assign crumbs = page.url | split: '/' %}
{% if crumbs.size > 1 %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "{{ site.url }}{{ site.baseurl }}"
    }{% assign position = 2 %}{% for crumb in crumbs %}{% if crumb != '' %}{% assign crumb_url = '' %}{% for c in crumbs limit:forloop.index %}{% if c != '' %}{% assign crumb_url = crumb_url | append: '/' | append: c %}{% endif %}{% endfor %},
    {
      "@type": "ListItem",
      "position": {{ position }},
      "name": "{{ crumb | replace: '-', ' ' | capitalize }}",
      "item": "{{ site.url }}{{ site.baseurl }}{{ crumb_url }}/"
    }{% assign position = position | plus: 1 %}{% endif %}{% endfor %}
  ]
}
</script>
{% endif %}
